<c-row class="g-3">
  <c-col [sm]="12" [md]="6" [lg]="4">
    <label cLabel for="identifierFilter">Filter by Identifier:</label>
    <input cFormControl class="form-control" type="text" id="identifierFilter" [(ngModel)]="identifierFilter"
      (input)="applyFilters()">
  </c-col>
  <c-col [sm]="12" [md]="6" [lg]="4">
    <label cLabel for="genderFilter">Filter by Gender:</label>
    <select cFormControl class="form-control" id="genderFilter" [(ngModel)]="genderFilter" (change)="applyFilters()">
      <option value="">All</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>
  </c-col>
  <c-col [sm]="12" [md]="6" [lg]="4">
    <label cLabel for="statusFilter">Filter by Status:</label>
    <select cFormControl class="form-control" id="statusFilter" [(ngModel)]="statusFilter" (change)="applyFilters()">
      <option value="">All</option>
      <option value="Alive">Alive</option>
      <option value="Dead">Dead</option>
      <option value="Sold">Sold</option>
    </select>
  </c-col>
</c-row>



<table cTable>
  <thead cTableColor="light">
    <tr>
      <th scope="col">Identifier</th>
      <th scope="col">Date of Birth</th>
      <th scope="col">Status</th>
      <th scope="col">Gender</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let pig of filteredPigs">
      <td>{{ pig.identifier }}</td>
      <td>{{ pig.date_birth }}</td>
      <td>{{ pig.status }}</td>
      <td>{{ pig.gender }}</td>
      <td>
        <c-dropdown variant="btn-group">
          <button cButton cDropdownToggle color="secondary" size="sm">
            <svg cIcon name="cil-settings"></svg>
          </button>
          <ul cDropdownMenu>
            <li><button cDropdownItem (click)="addWeightMode(pig)">Add Weight</button></li>
          </ul>
        </c-dropdown>
      </td>
    </tr>
  </tbody>
</table>

<c-pagination aria-label="Page navigation example">
  <li cPageItem *ngIf="currentPage > 1">
    <a cPageLink (click)="onPageChange(currentPage - 1)">Previous</a>
  </li>
  <li cPageItem *ngFor="let page of getPageNumbers()">
    <a cPageLink (click)="onPageChange(page)">{{ page }}</a>
  </li>
  <li cPageItem *ngIf="currentPage < totalPages">
    <a cPageLink (click)="onPageChange(currentPage + 1)">Next</a>
  </li>
</c-pagination>


  <c-modal id="addWeightModal" [visible]="modalVisible" (visibleChange)="handleModalChange($event)">
    <c-modal-header>
      <h5 cModalTitle>Delete Pig</h5>
      <button (click)="toggleModal()" cButtonClose></button>
    </c-modal-header>
    <form cForm [formGroup]="formAddWeight">

      <c-modal-body>
        <c-row class="mb-1">
          <label [sm]="4" cCol cLabel="col" for="date">Weighing Date</label>
          <c-col *ngIf="formAddWeight.controls['date'] as ctrl" [sm]="8">
            <input [valid]="
                ctrl.touched && ctrl.valid
                  ? true
                  : (modalSubmitted || ctrl.touched) && ctrl.invalid
                  ? false
                  : undefined
              " autocomplete="off" cFormControl formControlName="date" id="date"
              placeholder="Weighing Date" required type="date" />
            <c-form-feedback *ngIf="modalSubmitted || ctrl.invalid" [valid]="!(modalSubmitted || ctrl.invalid)">
              <ng-container *ngIf="ctrl.errors as errors">
                <div *ngIf="errors['required']">Weighing date is required</div>
                <div *ngIf="errors['pattern']">
                  {{ formErrors['date'].pattern }}
                </div>
              </ng-container>
            </c-form-feedback>
          </c-col>
        </c-row>

        <c-row class="mb-1">
          <label [sm]="4" cCol cLabel="col" for="weight">weight</label>
          <c-col *ngIf="formAddWeight.controls['weight'] as ctrl" [sm]="8">
            <input [valid]="
                ctrl.touched && ctrl.valid
                  ? true
                  : (modalSubmitted || ctrl.touched) && ctrl.invalid
                  ? false
                  : undefined
              " autocomplete="off" cFormControl formControlName="weight" id="weight" placeholder="weight" required
              type="text" />
            <c-form-feedback *ngIf="modalSubmitted || ctrl.invalid" [valid]="!(modalSubmitted || ctrl.invalid)">
              <ng-container *ngIf="ctrl.errors as errors">
                <div *ngIf="errors['required']">weight is required</div>
                <div *ngIf="errors['pattern']">
                  {{ formErrors['weight'].pattern }}
                </div>
              </ng-container>
            </c-form-feedback>
          </c-col>
        </c-row>

      </c-modal-body>

      <c-modal-footer>
        <button (click)="cancelAdd()" cButton color="secondary">
          Cancel
        </button>
        <button cButton color="primary" (click)="addWeight()">Confirm</button>

      </c-modal-footer>
    </form>
  </c-modal>
